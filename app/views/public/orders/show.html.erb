<div class="container">
    <h1>注文履歴詳細画面</h1>
    <div class="row">
        <div class="col-6">
            <table class="table table-bordered">
                注文情報<br>
                <tbody>
                    <tr>
                        <th>注文日</th>
                        <td><%= @order.created_at.strftime("%Y/%m/%d") %></td>
                    </tr>
                    <tr>
                        <th>配送先</th>
                        <td>
                            〒<%= @order.postcode%><br>
                            <%= @order.address%><br>
                            <%= @order.name%>
                        </td>
                    </tr>
                    <tr>
                        <th>支払い方法</th>
                        <td><%= Order.payment_methods_i18n[@order.payment_method] %></td>
                    </tr>
                    <tr>
                        <th>ステータス</th>
                        <td><%= Order.statuses_i18n[@order.status] %></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="col-4">
            <table class="table table-bordered">
                請求情報<br>
                <tbody>
                    <tr>
                        <th>商品合計</th>
                        <td><%= number_with_delimiter(@order.payment - @order.shipping_fee) %> 円</td>
                    </tr>
                    <tr>
                        <th>配送料</th>
                        <td><%= number_with_delimiter(@order.shipping_fee) %> 円</td>
                    </tr>
                    <tr>
                        <th>ご請求額</th>
                        <td><%= number_with_delimiter(@order.payment) %> 円</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <table class="table table-bordered">
        注文内容
        <thead>
            <th>商品</th>
            <th>単価（税込）</th>
            <th>個数</th>
            <th>小計</th>
            <th>ステータス</th>
        </thead>
        <tbody>
            <!--注文商品個別表示-->
            <% OrderItem.where(order_id: @order.id).each do |order_item| %>
                <tr>
                    <td><%= order_item.item.name %></td>
                    <td><%= number_with_delimiter(order_item.with_tax_price) %> 円</td>
                    <td><%= order_item.amount %></td>
                    <td><%= number_with_delimiter(order_item.subtotal) %> 円</td>
                    <td><%= OrderItem.statuses_i18n[order_item.status] %></td>
                </tr>
            <% end %>
        </tbody>
    </table>
</div>